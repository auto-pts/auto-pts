RFCOMM Service (ID 0x20)
====================

Commands and responses:

        Opcode 0x00 - Error response

        Opcode 0x01 - Read Supported Commands command/response

                Controller Index:       <non-controller>
                Command parameters:     <none>
                Response parameters:    <supported commands> (variable)

                Each bit in response is a flag indicating if command with
                opcode matching bit number is supported. Bit set to 1 means
                that command is supported. Bit 0 is reserved and shall always
                be set to 0. If specific bit is not present in response (less
                than required bytes received) it shall be assumed that command
                is not supported.

                In case of an error, the error response will be returned.

        Opcode 0x02 - Connect command

                Controller Index:       <controller id>
                Command parameters:     Address_Type (1 octet)
                                        Address (6 octets)
                                        Channel (1 octet)
                Response parameters:    <none>

                This command is used to create an RFCOMM connection.
                Address is the peer BD_ADDR and Channel is the RFCOMM
                server channel number.
                Connected Event (or Disconnected Event in case of an error)
                shall be expected after issuing this command.

                In case of an error, the error response will be returned.

        Opcode 0x03 - Disconnect command

                Controller Index:       <controller id>
                Command parameters:     Address_Type (1 octet)
                                        Address (6 octets)
                                        Channel (1 octet)
                Response parameters:    <none>

                This command is used to close an RFCOMM connection.
                Address is the peer BD_ADDR and Channel is the RFCOMM
                server channel number that identifies the RFCOMM DLC.
                Disconnected Event shall be expected after issuing this command.

                In case of an error, the error response will be returned.

        Opcode 0x04 - Send Data command

                Controller Index:       <controller id>
                Command parameters:     Address_Type (1 octet)
                                        Address (6 octets)
                                        Channel (1 octet)
                                        Data_Length (2 octets)
                                        Data (Data_Length octets)
                Response parameters:    <none>

                This command is used to send data over RFCOMM connection.
                Address is the peer BD_ADDR and Channel is the RFCOMM
                server channel number that identifies the RFCOMM DLC.

                In case of an error, the error response will be returned.

        Opcode 0x05 - Listen command

                Controller Index:       <controller id>
                Command parameters:     Channel (1 octet)
                Response parameters:    <none>

                This command is used to register RFCOMM server channel
                and listen for incoming connections.

                In case of an error, the error response will be returned.

        Opcode 0x06 - Send RPN command

                Controller Index:       <controller id>
                Command parameters:     Address_Type (1 octet)
                                        Address (6 octets)
                                        Channel (1 octet)
                                        Baud_Rate (1 octet)
                                        Line_Settings (1 octet)
                                        Flow_Control (1 octet)
                                        XOn_Char (1 octet)
                                        XOff_Char (1 octet)
                                        Param_Mask (2 octets)
                Response parameters:    <none>

                This command is used to send Remote Port Negotiation (RPN)
                command over RFCOMM connection.
                Address is the peer BD_ADDR and Channel is the RFCOMM
                server channel number.

                In case of an error, the error response will be returned.

        Opcode 0x07 - Get DLC Info command

                Controller Index:       <controller id>
                Command parameters:     Address_Type (1 octet)
                                        Address (6 octets)
                                        Channel (1 octet)
                Response parameters:    MTU (2 octets)
                                        State (1 octet)

                This command is used to retrieve information about an
                RFCOMM Data Link Connection (DLC).
                Address is the peer BD_ADDR and Channel is the RFCOMM
                server channel number.

                In case of an error, the error response will be returned.

Events:
        Opcode 0x80 - Connected Event

                Controller Index:       <controller id>
                Event parameters:       Address_Type (1 octet)
                                        Address (6 octets)
                                        Channel (1 octet)
                                        MTU (2 octets)

                This event indicates new RFCOMM connection.
                Address is the peer BD_ADDR and Channel is the RFCOMM
                server channel number that identifies the RFCOMM DLC.
                MTU is the maximum transmission unit for this connection.

        Opcode 0x81 - Disconnected Event

                Controller Index:       <controller id>
                Event parameters:       Address_Type (1 octet)
                                        Address (6 octets)
                                        Channel (1 octet)

                This event indicates RFCOMM disconnection.
                Address is the peer BD_ADDR and Channel is the RFCOMM
                server channel number that identifies the RFCOMM DLC.

        Opcode 0x82 - Data Received Event

                Controller Index:       <controller id>
                Event parameters:       Address_Type (1 octet)
                                        Address (6 octets)
                                        Channel (1 octet)
                                        Data_Length (2 octets)
                                        Data (Data_Length octets)

                This event forwards data received over RFCOMM connection.
                Address is the peer BD_ADDR and Channel is the RFCOMM
                server channel number that identifies the RFCOMM DLC.

        Opcode 0x83 - Data Sent Event

                Controller Index:       <controller id>
                Event parameters:       Address_Type (1 octet)
                                        Address (6 octets)
                                        Channel (1 octet)
                                        Err (1 octet signed)

                This event indicates data transmission completion.
                Address is the peer BD_ADDR and Channel is the RFCOMM
                server channel number that identifies the RFCOMM DLC.
                Err indicates if the transmission was successful (0) or
                failed (negative error code).
